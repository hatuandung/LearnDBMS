<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width" />
<meta name="description" content="" />
<title></title>
<link rel="stylesheet" href="../../android_asset/css/style.css" />
</head>

<body>
<h1>SQL GROUP BY Statement</h1>
<p>Aggregate functions often need an added GROUP BY statement.</p>
<hr />
<h2>The GROUP BY Statement</h2>
<p>The GROUP BY statement is used in conjunction with the aggregate functions to group the result-set by one or more columns.</p>
<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"> 
<tr> 
<td>
<h3>SQL GROUP BY Syntax</h3>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <td>SELECT column_name, aggregate_function(column_name)<br />
FROM table_name<br />WHERE column_name operator value<br />
GROUP BY column_name </td> 
  </tr> 
</table> 
</td> 
</tr>
</table>
<hr />
<h2>SQL GROUP BY Example</h2>
<p>We have the following "Orders" table:</p>
<table class="reference" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <th>O_Id</th> 
    <th>OrderDate</th> 
    <th>OrderPrice</th>
    <th>Customer</th> 
  </tr> 
  <tr> 
    <td>1</td> 
    <td>2011/11/07</td> 
    <td>1200</td> 
    <td>Johnson</td>
  </tr> 
  <tr> 
    <td>2</td> 
    <td>2011/08/15</td> 
    <td>1500</td> 
    <td>Brown</td>
  </tr> 
  <tr> 
    <td>3</td> 
    <td>2011/05/04</td> 
    <td>600</td> 
    <td>Johnson</td>
  </tr> 
  <tr> 
    <td>4</td> 
    <td>2011/05/21</td> 
    <td>500</td>
    <td>Johnson</td> 
  </tr> 
  <tr> 
    <td>5</td> 
    <td>2011/07/30</td> 
    <td>2500</td> 
    <td>Taylor</td>
  </tr> 
  <tr> 
    <td>6</td> 
    <td>2011/10/08</td> 
    <td>300</td> 
    <td>Brown</td>
  </tr> 
</table>
<p>Now we want to find the total sum (total order) of each customer.</p>
<p>We will have to use the GROUP BY statement to group the customers.</p>
<p>We use the following SQL statement:</p>
<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"> 
<tr> 
<td>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <td>SELECT Customer,SUM(OrderPrice) FROM Orders<br />
GROUP BY Customer</td> 
  </tr> 
</table> 
</td> 
</tr>
</table>
<p>The result-set will look like this:</p>
<table class="reference" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <th>Customer</th>
    <th>SUM(OrderPrice)</th>
  </tr> 
  <tr> 
    <td>Johnson</td> 
    <td>2900</td> 
  </tr> 
  <tr> 
    <td>Brown</td> 
    <td>1800</td> 
  </tr> 
  <tr> 
    <td>Taylor</td> 
    <td>2500</td> 
  </tr> 
</table>
<p>Nice! Isn't it? :)</p>
<p>Let's see what happens if we omit the GROUP BY statement:</p>
<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"> 
<tr> 
<td>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <td>SELECT Customer,SUM(OrderPrice) FROM Orders</td> 
  </tr> 
</table> 
</td> 
</tr>
</table>
<p>The result-set will look like this:</p>
<table class="reference" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <th>Customer</th>
    <th>SUM(OrderPrice)</th>
  </tr> 
  <tr> 
    <td>Johnson</td> 
    <td>6600</td> 
  </tr> 
  <tr> 
    <td>Brown</td> 
    <td>6600</td> 
  </tr> 
  <tr> 
    <td>Johnson</td> 
    <td>6600</td> 
  </tr> 
  <tr> 
    <td>Johnson</td> 
    <td>6600</td> 
  </tr> 
  <tr> 
    <td>Taylor</td> 
    <td>6600</td> 
  </tr> 
  <tr> 
    <td>Brown</td> 
    <td>6600</td> 
  </tr> 
</table>
<p>The result-set above is not what we wanted.</p>
<p><b>Explanation of why the above SELECT statement cannot be used:</b> The SELECT statement above has two columns specified (Customer and SUM(OrderPrice). The "SUM(OrderPrice)" returns a single value (that is the total sum of the "OrderPrice" column), while "Customer" returns 6 values (one value for each row in the "Orders" table). This will therefore not give us the correct result. However, you have seen that the GROUP BY statement solves this problem.</p>
<hr />
<h2>GROUP BY More Than One Column</h2>
<p>We can also use the GROUP BY statement on more than one column, like this:</p>
<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"> 
<tr> 
<td>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <td>SELECT Customer,OrderDate, SUM(OrderPrice) FROM Orders<br />
GROUP BY Customer,OrderDate</td> 
  </tr> 
</table> 
</td> 
</tr>
</table>
</body>
</html>
