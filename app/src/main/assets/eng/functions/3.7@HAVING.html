<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width" />
<meta name="description" content="" />
<title></title>
<link rel="stylesheet" href="../../android_asset/css/style.css" />
</head>

<body>
<h1>SQL HAVING Clause</h1>
<p>The SQL HAVING clause is used to filter data based on the group functions. This is similar to WHERE condition but is used with group functions. Group functions cannot be used in WHERE Clause but can be used in HAVING clause.</p>
<hr />
<h2>The HAVING Clause</h2>
<p>The HAVING clause was added to SQL because the WHERE keyword could not be used with aggregate functions.</p>
<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"> 
<tr> 
<td>
<h3>SQL HAVING Syntax</h3>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <td>SELECT column_name, aggregate_function(column_name)<br />
FROM table_name<br />
WHERE column_name operator value<br />
GROUP BY column_name<br />
HAVING aggregate_function(column_name) operator value </td> 
  </tr> 
</table> 
</td> 
</tr>
</table>
<hr />
<h2>SQL HAVING Example</h2>
<p>We have the following "Orders" table:</p>
<table class="reference" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <th>O_Id</th> 
    <th>OrderDate</th> 
    <th>OrderPrice</th>
    <th>Customer</th> 
  </tr> 
  <tr> 
    <td>1</td> 
    <td>2011/11/07</td> 
    <td>1200</td> 
    <td>Johnson</td>
  </tr> 
  <tr> 
    <td>2</td> 
    <td>2011/08/15</td> 
    <td>1500</td> 
    <td>Brown</td>
  </tr> 
  <tr> 
    <td>3</td> 
    <td>2011/05/04</td> 
    <td>600</td> 
    <td>Johnson</td>
  </tr> 
  <tr> 
    <td>4</td> 
    <td>2011/05/21</td> 
    <td>500</td>
    <td>Johnson</td> 
  </tr> 
  <tr> 
    <td>5</td> 
    <td>2011/07/30</td> 
    <td>2500</td> 
    <td>Taylor</td>
  </tr> 
  <tr> 
    <td>6</td> 
    <td>2011/10/08</td> 
    <td>300</td> 
    <td>Brown</td>
  </tr> 
</table>
<p>Now we want to find if any of the customers have a total order of less than 2000.</p>
<p>We use the following SQL statement:</p>
<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"> 
<tr> 
<td>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <td>SELECT Customer,SUM(OrderPrice) FROM Orders<br />
GROUP BY Customer<br />
HAVING SUM(OrderPrice)<2000 </td> 
  </tr> 
</table> 
</td> 
</tr>
</table>
<p>The result-set will look like this:</p>
<table class="reference" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <th>Customer</th>
    <th>SUM(OrderPrice)</th>
  </tr> 
  <tr> 
    <td>Brown</td> 
    <td>1800</td> 
  </tr> 
</table>
<p>Now we want to find if the customers "Johnson" or "Taylor" have a total order of more than 1500.</p>
<p>We add an ordinary WHERE clause to the SQL statement:</p>
<table class="example" border="0" cellpadding="0" cellspacing="0" width="100%"> 
<tr> 
<td>
<table class="example_code notranslate" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <td>SELECT Customer,SUM(OrderPrice) FROM Orders<br />
WHERE Customer='Johnson' OR Customer='Taylor'<br />
GROUP BY Customer<br />
HAVING SUM(OrderPrice)>1500</td> 
  </tr> 
</table> 
</td> 
</tr>
</table>
<p>The result-set will look like this:</p>
<table class="reference" border="0" cellpadding="0" cellspacing="0" width="100%"> 
  <tr> 
    <th>Customer</th>
    <th>SUM(OrderPrice)</th>
  </tr> 
  <tr> 
    <td>Johnson</td> 
    <td>2900</td> 
  </tr> 
  <tr> 
    <td>Taylor</td> 
    <td>2500</td> 
  </tr> 
</table>
</body>
</html>
